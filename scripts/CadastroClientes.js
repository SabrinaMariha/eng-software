//{
//   "paises": [
//     {
//       "id": 1,
//       "nome": "Afeganistão"
//     },
//     {
//       "id": 2,
//       "nome": "África do Sul"
//     },
//     {
//       "id": 3,
//       "nome": "Albânia"
//     },
//     {
//       "id": 4,
//       "nome": "Alemanha"
//     },
//     {
//       "id": 5,
//       "nome": "Andorra"
//     },
//     {
//       "id": 6,
//       "nome": "Angola"
//     },
//     {
//       "id": 7,
//       "nome": "Antígua e Barbuda"
//     },
//     {
//       "id": 8,
//       "nome": "Arábia Saudita"
//     },
//     {
//       "id": 9,
//       "nome": "Argélia"
//     },
//     {
//       "id": 10,
//       "nome": "Argentina"
//     },
//     {
//       "id": 11,
//       "nome": "Armênia"
//     },
//     {
//       "id": 12,
//       "nome": "Austrália"
//     },
//     {
//       "id": 13,
//       "nome": "Áustria"
//     },
//     {
//       "id": 14,
//       "nome": "Azerbaijão"
//     },
//     {
//       "id": 15,
//       "nome": "Bahamas"
//     },
//     {
//       "id": 16,
//       "nome": "Bahrein"
//     },
//     {
//       "id": 17,
//       "nome": "Bangladesh"
//     },
//     {
//       "id": 18,
//       "nome": "Barbados"
//     },
//     {
//       "id": 19,
//       "nome": "Belarus"
//     },
//     {
//       "id": 20,
//       "nome": "Bélgica"
//     },
//     {
//       "id": 21,
//       "nome": "Belize"
//     },
//     {
//       "id": 22,
//       "nome": "Benin"
//     },
//     {
//       "id": 23,
//       "nome": "Butão"
//     },
//     {
//       "id": 24,
//       "nome": "Bolívia"
//     },
//     {
//       "id": 25,
//       "nome": "Bósnia e Herzegovina"
//     },
//     {
//       "id": 26,
//       "nome": "Botsuana"
//     },
//     {
//       "id": 27,
//       "nome": "Brasil",
//       "estados": [
//         {
//           "id": 2700,
//           "nome": "Acre",
//           "cidades": [
//             {"id": 27001, "nome": "Rio Branco"},
//             {"id": 27002, "nome": "Cruzeiro do Sul"},
//             {"id": 27003, "nome": "Sena Madureira"}
//           ]
//         },
//         {
//           "id": 2701,
//           "nome": "Alagoas",
//           "cidades": [
//             {"id": 27010, "nome": "Maceió"},
//             {"id": 27011, "nome": "Arapiraca"},
//             {"id": 27012, "nome": "Palmeira dos Índios"}
//           ]
//         },
//         {
//           "id": 2702,
//           "nome": "Amapá",
//           "cidades": [
//             {"id": 27020, "nome": "Macapá"},
//             {"id": 27021, "nome": "Santana"},
//             {"id": 27022, "nome": "Laranjal do Jari"}
//           ]
//         },
//         {
//           "id": 2703,
//           "nome": "Amazonas",
//           "cidades": [
//             {"id": 27030, "nome": "Manaus"},
//             {"id": 27031, "nome": "Parintins"},
//             {"id": 27032, "nome": "Itacoatiara"}
//           ]
//         },
//         {
//           "id": 2704,
//           "nome": "Bahia",
//           "cidades": [
//             {"id": 27040, "nome": "Salvador"},
//             {"id": 27041, "nome": "Feira de Santana"},
//             {"id": 27042, "nome": "Vitória da Conquista"}
//           ]
//         },
//         {
//           "id": 2705,
//           "nome": "Ceará",
//           "cidades": [
//             {"id": 27050, "nome": "Fortaleza"},
//             {"id": 27051, "nome": "Juazeiro do Norte"},
//             {"id": 27052, "nome": "Sobral"}
//           ]
//         },
//         {
//           "id": 2706,
//           "nome": "Distrito Federal",
//           "cidades": [
//             {"id": 27060, "nome": "Brasília"}
//           ]
//         },
//         {
//           "id": 2707,
//           "nome": "Espírito Santo",
//           "cidades": [
//             {"id": 27070, "nome": "Vitória"},
//             {"id": 27071, "nome": "Vila Velha"},
//             {"id": 27072, "nome": "Serra"}
//           ]
//         },
//         {
//           "id": 2708,
//           "nome": "Goiás",
//           "cidades": [
//             {"id": 27080, "nome": "Goiânia"},
//             {"id": 27081, "nome": "Anápolis"},
//             {"id": 27082, "nome": "Rio Verde"}
//           ]
//         },
//         {
//           "id": 2709,
//           "nome": "Maranhão",
//           "cidades": [
//             {"id": 27090, "nome": "São Luís"},
//             {"id": 27091, "nome": "Imperatriz"},
//             {"id": 27092, "nome": "Caxias"}
//           ]
//         },
//         {
//           "id": 2710,
//           "nome": "Mato Grosso",
//           "cidades": [
//             {"id": 27100, "nome": "Cuiabá"},
//             {"id": 27101, "nome": "Várzea Grande"},
//             {"id": 27102, "nome": "Rondonópolis"}
//           ]
//         },
//         {
//           "id": 2711,
//           "nome": "Mato Grosso do Sul",
//           "cidades": [
//             {"id": 27110, "nome": "Campo Grande"},
//             {"id": 27111, "nome": "Dourados"},
//             {"id": 27112, "nome": "Três Lagoas"}
//           ]
//         },
//         {
//           "id": 2712,
//           "nome": "Minas Gerais",
//           "cidades": [
//             {"id": 27120, "nome": "Belo Horizonte"},
//             {"id": 27121, "nome": "Uberlândia"},
//             {"id": 27122, "nome": "Contagem"}
//           ]
//         },
//         {
//           "id": 2713,
//           "nome": "Pará",
//           "cidades": [
//             {"id": 27130, "nome": "Belém"},
//             {"id": 27131, "nome": "Santarém"},
//             {"id": 27132, "nome": "Marabá"}
//           ]
//         },
//         {
//           "id": 2714,
//           "nome": "Paraíba",
//           "cidades": [
//             {"id": 27140, "nome": "João Pessoa"},
//             {"id": 27141, "nome": "Campina Grande"},
//             {"id": 27142, "nome": "Patos"}
//           ]
//         },
//         {
//           "id": 2715,
//           "nome": "Paraná",
//           "cidades": [
//             {"id": 27150, "nome": "Curitiba"},
//             {"id": 27151, "nome": "Londrina"},
//             {"id": 27152, "nome": "Maringá"}
//           ]
//         },
//         {
//           "id": 2716,
//           "nome": "Pernambuco",
//           "cidades": [
//             {"id": 27160, "nome": "Recife"},
//             {"id": 27161, "nome": "Jaboatão dos Guararapes"},
//             {"id": 27162, "nome": "Olinda"}
//           ]
//         },

document.addEventListener("DOMContentLoaded", () => {
    const paisSelect = document.getElementById("pais");
    const estadoSelect = document.getElementById("estado");
    const cidadeSelect = document.getElementById("cidade");
    let dados;

    // Função para carregar os dados do JSON
    async function carregarDadosPaises() {
        try {
            const response = await fetch("/dados.json");
            if (!response.ok) throw new Error("Erro ao carregar os dados");
            dados = await response.json();

            // Preencher países no select
            dados.paises.forEach(pais => {
                const option = document.createElement("option");
                option.value = pais.id;
                option.textContent = pais.nome;
                paisSelect.appendChild(option);
            });
            console.log("Opções de países adicionadas ao select:", paisSelect.innerHTML);
        } catch (error) {
            console.error("Erro ao carregar os dados:", error);
            alert("Não foi possível carregar os dados. Tente novamente mais tarde.");
        }
    }
    carregarDadosPaises();
    console.log("Select de países encontrado:", paisSelect);

     async function carregarDadosPaises() {
        try {
            const response = await fetch("/dados.json");
            if (!response.ok) throw new Error("Erro ao carregar os dados");
            dados = await response.json();

            // Preencher países no select
            dados.paises.forEach(pais => {
                const option = document.createElement("option");
                option.value = pais.id;
                option.textContent = pais.nome;
                paisSelect.appendChild(option);
            });

            const paisId = paisSelect.value;
            estadoSelect.disabled = false;
            if (paisId) {
            const pais = dados?.paises?.find(p => p.id == paisId);
            if (pais && pais.estados) {
                pais.estados.forEach(estado => {
                    const option = document.createElement("option");
                    option.value = estado.id;
                    option.textContent = estado.nome;
                    estadoSelect.appendChild(option);
                });
                
            }
        }
            console.log("Opções de países adicionadas ao select:", paisSelect.innerHTML);
        } catch (error) {
            console.error("Erro ao carregar os dados:", error);
            alert("Não foi possível carregar os dados. Tente novamente mais tarde.");
        }
    }

    // Evento para atualizar estados com base no país selecionado
    // paisSelect.addEventListener("change", () => {
    //     const paisId = paisSelect.value;
    //     estadoSelect.disabled = false;
    //     if (paisId) {
    //         const pais = dados?.paises?.find(p => p.id == paisId);
    //         if (pais && pais.estados) {
    //             pais.estados.forEach(estado => {
    //                 const option = document.createElement("option");
    //                 option.value = estado.id;
    //                 option.textContent = estado.nome;
    //                 estadoSelect.appendChild(option);
    //             });
                
    //         }
    //     }
    // });

    // Evento para envio do formulário
    const form = document.querySelector("form");
    if (form) {
        form.addEventListener("submit", async (event) => {
            event.preventDefault();

            const cliente = {
                nome: document.getElementById("nome").value.trim(),
                dataNascimento: document.getElementById("data-nascimento").value.trim(),
                cpf: document.getElementById("cpf").value.trim(),
                email: document.getElementById("email").value.trim(),
                telefone: document.getElementById("telefone").value.trim(),
                senha: document.getElementById("senha").value.trim(),
                confirmacaoSenha: document.getElementById("confirmacao-senha").value.trim(),
            };

            if (cliente.senha !== cliente.confirmacaoSenha) {
                alert("As senhas não coincidem. Verifique e tente novamente.");
                return;
            }

            try {
                const response = await fetch("http://localhost:3000", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(cliente),
                });

                if (!response.ok) throw new Error("Erro ao cadastrar cliente");

                const result = await response.json();
                alert(`Cliente cadastrado com sucesso: ${result.nome}`);
            } catch (error) {
                console.error("Erro no cadastro:", error);
                alert("Ocorreu um erro ao cadastrar o cliente. Tente novamente mais tarde.");
            }
        });
    }

    // Carregar dados ao iniciar
    
});
